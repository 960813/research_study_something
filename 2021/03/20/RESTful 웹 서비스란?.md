# RESTful 웹 서비스란?

* 2015-03-09 / 이용주
* https://blog.naver.com/yjlee3369/220294687865

## 개요

REST는 웹의 창시자 중 한명인 Roy Fielding의 박사학위 논문에 의해 소개되었다. 그는 현재의 웹 아키텍처가 웹이 지닌 본래의 설계 우수성을 충분히 활용하지 못하고 있다고 판단하고, 웹의 장점을 최대한 활용할 수 있는 네트워크 기반의 아키텍처를 제안했는데 그것이 바로 REST다.

이런 REST 아키텍처 스타일에 따라 정의되고 이용되는 서비스나 응용을 RESTful 웹 서비스라 하며, RESTful 웹 서비스의 기본 개념은 다음과 같다

## 리소스(resource)

RESTful 웹 서비스의 가장 큰 특징 중의 하나는 모든 대상을 리소스, 즉, 자원으로 표현한다는 것이다. 이 리소스는 HTTP URI(Uniform Resource Identifier)에 의해 표현되며, user, product, order 등과 같이 직관적으로 리소스를 인식할 수 있는 명사형의 단어들로 설계되고, id 5678을 가지는 사용자는 `/user/5678` 과 같은 계층 구조로 구성된다.

SOAP 기반 웹 서비스에서는 주문・제품 정보 등을 생성, 검색, 변경하는 오퍼레이션들이 각기 존재하여 필요한 기능을 수행할 때 해당 오퍼레이션(예, getOrder())을 호출하는 방식으로 일반적인 프로그래밍 개념과 동일한 반면에, RESTful 웹 서비스에서는 주문 리스트(/order), 특정 id에 대한 주문 정보(/order/{id}), 제품 리스트(/product), 특정 id 제품 정보(/product/{id})등을 모두 리소스로 정의하고, 각 리소스에 URI를 할당한 후 그 URI에 대해 GET 또는 POST 메소드를 수행한다.

## 메소드(method)

REST 구조에서의 리소스는 HTTP의 기본 메소드인 GET, POST, PUT, DELETE만으로 접근할 수 있다. 리소스에 접근하기 위한 이러한 4개의 HTTP 메소드는 일반 CRUD(Create, Read, Update, Delete) 오퍼레이션에 대응될 수 있다. PUT과 POST의 차이점은 새로운 리소스의 URI가 클라이언트에 의해 결정되느냐 서버에 의해 결정되느냐에 따라 구별된다. PUT을 사용하는 경우 클라이언트에서 서버에게 보내는 정보로 새로운 URI가 결정된다.

반면 POST는 서버에서 정렬을 기준으로 하든지 또는 내부 데이터베이스 id로 결정하든지 최종 URI는 리소스가 추가되는 시점에 결정된다. 예를 들면, `/user/1` 또는 `/user/5678` 과 같이 1이나 5678은 서버 내부에서 결정되고 클라이언트는 이것을 결정할 수 없다. 이후로는 클라이언트가 리소스의 URI를 알게 되므로 GET, PUT, DELETE 메소드를 사용할 수 있다.

GET 요청은 데이터를 읽기만 하고 서버 상태를 바꾸지 않으므로 안전(Safety)하다고 하고, PUT과 DELETE는 한 번 요청하나 여러 번 요청하나 항상 같은 결과를 나타내므로 Idempotence 하다고 한다. Safety와 Idempotence는 신뢰할 수 없는 네트워크 상에서 HTTP요청을 신회할 수 있게 만들어 준다. 예를 들어, GET, PUT, 또는 DELETE 메소드 수행 시 클라이언트 쪽에서 응답을 못 받았을 경우 동일한 요청을 한번 더 보내도 된다. 하지만 POST는 Safety 하지도 Idempotence 하지도 않기 때문에 POST 메소드는 주의해서 사용해야 한다.

## 표현(representation)

클라이언트가 서버로 요청을 보냈을 때, 서버가 응답으로 보내주는 리소스의 상태(state)를 표현이라고 한다. 하나의 리소스는 다양한 표현을 가질 수 있는데, 이는 XML, JSON, HTML, text, image 등이 가능하며 클라이언트에서 원하는 형식을 서버에게 요청할 수 있다.

표현은 다른 자원을 참조하는 링크(link)를 포함할 수 있으며, 만일 클라이언트가 링크를 따라 다른 자원으로 이동한다면 이는 그 상태를 변경(즉, state transfer)하는 것이다. 거르모르 한 상태에서 다른 상태로의 변환은 링크를 따라 이루어진다. 이것이 REST라는 이름이 사용된 이유이기도 하고 이 개념을 HATEOAS(Hypermedia As The Engine Of Application State)라고도 한다.

## 스테이트리스(stateless)

스테이트리스란 웹 서비스 제공 서버 측에서 클라이언트의 상태 정보를 저장・관리하지 않는 것을 의미한다. 즉, 클라이언트가 HTTP 요청(Request)을 할 때 서버에 그 요청을 수행할 수 있는 모든 정보를 주어야 하며 이전의 요청에 의존해서는 안 된다.

예를 들어, http://korea.com/search?q=tea 의 다음 페이지를 검색하기 위해서는 앞의 요청에 의존하지 않는 독립적인 요청이 이루어져야 한다.(즉, http://korea.com/search?q=tea&start=10). 서버가 상태를 유지하는(stateful) 상황이라면 질의 문자열인 "tea"가 서버의 세션에 저장되어 있으므로 또 다시 보낼 필요 없이 "start=10"만 보내주면 될 것이다.

이처럼 상태를 유지하면 HTTP 요청 자체는 간단해지지만 클라이언트와 서버 간의 세션 상태를 동기화하고 유지해야 하기 때문에 HTTP 프로토콜은 더욱 복잡해진다. 하지만 RESTful 웹 서비스는 상태를 저장하지 않으므로 확장성이 좋아지고 캐쉬(cache)하기에 적합한 구조를 만들 수 있는 장점이 있다.